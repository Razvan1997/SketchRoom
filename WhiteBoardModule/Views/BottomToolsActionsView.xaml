<UserControl
    x:Class="WhiteBoardModule.Views.BottomToolsActionsView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:coreConverters="clr-namespace:SketchRoom.Toolkit.Wpf.Converters;assembly=SketchRoom.Toolkit.Wpf"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:enums="clr-namespace:SketchRoom.Models.Enums;assembly=SketchRoom.Models"
    xmlns:local="clr-namespace:WhiteBoardModule.Views"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:prism="http://prismlibrary.com/"
    xmlns:svgc="http://sharpvectors.codeplex.com/svgc/"
    d:DesignHeight="450"
    d:DesignWidth="800"
    prism:ViewModelLocator.AutoWireViewModel="True"
    Loaded="UserControl_Loaded"
    mc:Ignorable="d">
    <UserControl.Resources>

        <Style x:Key="LineThicknessDotStyle" TargetType="Ellipse">
            <Setter Property="Fill" Value="White" />
            <Setter Property="Margin" Value="4" />
            <Setter Property="Cursor" Value="Hand" />
        </Style>

        <coreConverters:EnumEqualityConverter x:Key="EnumEqualityConverter" />

        <!--  Stil pentru ToggleButton  -->
        <Style
            x:Key="ToolToggleButtonStyle"
            BasedOn="{StaticResource {x:Type ToggleButton}}"
            TargetType="ToggleButton">
            <Setter Property="Background" Value="Transparent" />
            <Setter Property="BorderBrush" Value="Transparent" />
            <Setter Property="Padding" Value="5" />
            <Setter Property="Margin" Value="5" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ToggleButton">
                        <Border Background="{TemplateBinding Background}" CornerRadius="5">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsChecked" Value="True">
                                <Setter Property="Background" Value="#0078D7" />
                                <Setter Property="Foreground" Value="White" />
                            </Trigger>
                            <!--  Eliminat hover trigger  -->
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </UserControl.Resources>

    <Border
        Margin="10"
        Padding="10"
        Background="#404040"
        BorderBrush="#292828"
        BorderThickness="1"
        CornerRadius="10">

        <StackPanel
            HorizontalAlignment="Center"
            VerticalAlignment="Center"
            Orientation="Horizontal">
            <!--  Tool 1  -->
            <ToggleButton
                Command="{Binding SelectToolCommand}"
                CommandParameter="{x:Static enums:WhiteBoardTool.Cursor}"
                IsChecked="{Binding SelectedTool, Mode=TwoWay, Converter={StaticResource EnumEqualityConverter}, ConverterParameter={x:Static enums:WhiteBoardTool.Cursor}}"
                Style="{StaticResource ToolToggleButtonStyle}">
                <svgc:SvgViewbox
                    Width="24"
                    Height="24"
                    Source="pack://application:,,,/WhiteBoardModule;component/Resources/cursor.svg" />
            </ToggleButton>

            <Separator
                Width="1"
                Margin="5,0"
                VerticalAlignment="Center"
                Background="Gray" />

            <!--  Tool 2  -->
            <ToggleButton
                Command="{Binding SelectToolCommand}"
                CommandParameter="{x:Static enums:WhiteBoardTool.Pan}"
                IsChecked="{Binding SelectedTool, Mode=TwoWay, Converter={StaticResource EnumEqualityConverter}, ConverterParameter={x:Static enums:WhiteBoardTool.Pan}}"
                Style="{StaticResource ToolToggleButtonStyle}">
                <svgc:SvgViewbox
                    Width="24"
                    Height="24"
                    Source="pack://application:,,,/WhiteBoardModule;component/Resources/drag.svg" />
            </ToggleButton>

            <ToggleButton
                Command="{Binding SelectToolCommand}"
                CommandParameter="{x:Static enums:WhiteBoardTool.CurvedArrow}"
                IsChecked="{Binding SelectedTool, Mode=TwoWay, Converter={StaticResource EnumEqualityConverter}, ConverterParameter={x:Static enums:WhiteBoardTool.CurvedArrow}}"
                Style="{StaticResource ToolToggleButtonStyle}"
                Tag="ConnectorCurved">
                <svgc:SvgViewbox
                    Width="24"
                    Height="24"
                    Source="pack://application:,,,/WhiteBoardModule;component/Resources/curved-arrow.svg" />
            </ToggleButton>
            <ToggleButton
                Command="{Binding SelectToolCommand}"
                CommandParameter="{x:Static enums:WhiteBoardTool.TextEdit}"
                IsChecked="{Binding SelectedTool, Mode=TwoWay, Converter={StaticResource EnumEqualityConverter}, ConverterParameter={x:Static enums:WhiteBoardTool.TextEdit}}"
                Style="{StaticResource ToolToggleButtonStyle}">
                <svgc:SvgViewbox
                    Width="24"
                    Height="24"
                    Source="pack://application:,,,/WhiteBoardModule;component/Resources/text-edit.svg" />
            </ToggleButton>

            <ToggleButton
                Command="{Binding SelectToolCommand}"
                CommandParameter="{x:Static enums:WhiteBoardTool.TextSelection}"
                IsChecked="{Binding SelectedTool, Mode=TwoWay, Converter={StaticResource EnumEqualityConverter}, ConverterParameter={x:Static enums:WhiteBoardTool.TextSelection}}"
                Style="{StaticResource ToolToggleButtonStyle}">
                <svgc:SvgViewbox
                    Width="24"
                    Height="24"
                    Source="pack://application:,,,/WhiteBoardModule;component/Resources/text-selection.svg" />
            </ToggleButton>

            <Grid>
                <ToggleButton
                    x:Name="FreeDrawButton"
                    Click="FreeDrawButton_Click"
                    Command="{Binding SelectToolCommand}"
                    CommandParameter="{x:Static enums:WhiteBoardTool.FreeDraw}"
                    IsChecked="{Binding SelectedTool, Mode=TwoWay, Converter={StaticResource EnumEqualityConverter}, ConverterParameter={x:Static enums:WhiteBoardTool.FreeDraw}}"
                    Style="{StaticResource ToolToggleButtonStyle}">
                    <svgc:SvgViewbox
                        Width="24"
                        Height="24"
                        Source="pack://application:,,,/WhiteBoardModule;component/Resources/free-draw.svg" />
                </ToggleButton>

                <!--  Popup  -->
                <Popup
                    x:Name="ThicknessPopup"
                    AllowsTransparency="True"
                    Placement="Top"
                    PlacementTarget="{Binding ElementName=FreeDrawButton}"
                    StaysOpen="False"
                    VerticalOffset="-20">
                    <Border
                        Padding="10"
                        Background="#404040"
                        CornerRadius="4">
                        <StackPanel Orientation="Horizontal">
                            <Ellipse
                                Width="6"
                                Height="6"
                                MouseDown="Dot_MouseDown"
                                Style="{StaticResource LineThicknessDotStyle}"
                                Tag="1" />
                            <Ellipse
                                Width="10"
                                Height="10"
                                MouseDown="Dot_MouseDown"
                                Style="{StaticResource LineThicknessDotStyle}"
                                Tag="2" />
                            <Ellipse
                                Width="14"
                                Height="14"
                                MouseDown="Dot_MouseDown"
                                Style="{StaticResource LineThicknessDotStyle}"
                                Tag="3" />
                            <Ellipse
                                Width="18"
                                Height="18"
                                MouseDown="Dot_MouseDown"
                                Style="{StaticResource LineThicknessDotStyle}"
                                Tag="4" />
                        </StackPanel>
                    </Border>
                </Popup>
            </Grid>

            <Grid>
                <ToggleButton
                    x:Name="RemoveStrokeButton"
                    Click="RemoveStrokeButton_Click"
                    Command="{Binding SelectToolCommand}"
                    CommandParameter="{x:Static enums:WhiteBoardTool.RemoveStroke}"
                    IsChecked="{Binding SelectedTool, Mode=TwoWay, Converter={StaticResource EnumEqualityConverter}, ConverterParameter={x:Static enums:WhiteBoardTool.RemoveStroke}}"
                    Style="{StaticResource ToolToggleButtonStyle}">
                    <svgc:SvgViewbox
                        Width="24"
                        Height="24"
                        Source="pack://application:,,,/WhiteBoardModule;component/Resources/remove-stroke.svg" />
                </ToggleButton>

                <Popup
                    x:Name="EraserPopup"
                    AllowsTransparency="True"
                    Placement="Top"
                    PlacementTarget="{Binding ElementName=RemoveStrokeButton}"
                    StaysOpen="False"
                    VerticalOffset="-20">
                    <Border
                        Padding="10"
                        Background="#404040"
                        CornerRadius="4">
                        <StackPanel Orientation="Horizontal">
                            <Ellipse
                                Width="10"
                                Height="10"
                                MouseDown="EraserDot_MouseDown"
                                Style="{StaticResource LineThicknessDotStyle}"
                                Tag="5" />
                            <Ellipse
                                Width="14"
                                Height="14"
                                MouseDown="EraserDot_MouseDown"
                                Style="{StaticResource LineThicknessDotStyle}"
                                Tag="10" />
                            <Ellipse
                                Width="18"
                                Height="18"
                                MouseDown="EraserDot_MouseDown"
                                Style="{StaticResource LineThicknessDotStyle}"
                                Tag="15" />
                            <Ellipse
                                Width="22"
                                Height="22"
                                MouseDown="EraserDot_MouseDown"
                                Style="{StaticResource LineThicknessDotStyle}"
                                Tag="20" />
                        </StackPanel>
                    </Border>
                </Popup>
            </Grid>

        </StackPanel>
    </Border>
</UserControl>
